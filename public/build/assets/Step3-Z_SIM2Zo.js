import{r as T,j as e,Y as E,B as d}from"./app-CkWx0ziT.js";import{I as C}from"./input-D_xANFY4.js";import{L as y}from"./label-BJBSjzRP.js";import{S as k,a as I,b as A,c as D,d as F}from"./select-K8YH05Sy.js";import{i as B}from"./index-bwGpo7tC.js";import{Z as L}from"./index-BVh6SYYr.js";import{a as R}from"./schemas-DL5d6btj.js";import{A as S}from"./index-CvH-UYLy.js";import{m as U}from"./proxy-D3ZUg4-_.js";import"./use-combine-values-DXlfacMq.js";import"./index-BdQq_4o_.js";import"./index-B6yvsKc-.js";import"./index-Bur4E9wJ.js";import"./chevrons-up-down-CgSDZjy1.js";import"./chevron-down-DNksLOx3.js";const W=({formData:p,setFormData:u,currentStep:h,setCurrentStep:f})=>{const[c,n]=T.useState([]),v=["all","windows","mobiles","linux","android","iOs"],N=()=>{u(t=>({...t,urls:[...t.urls,{url:"",deviceType:""}]})),n(t=>[...t,{}])},w=t=>{u(r=>({...r,urls:r.urls.filter((l,s)=>s!==t)})),n(r=>r.filter((l,s)=>s!==t))},x=(t,r,l)=>{u(s=>{const a=s.urls.map((o,m)=>m===t?{...o,[r]:l}:o);return{...s,urls:a}}),n(s=>{const a=[...s];return a[t]={...a[t],[r]:void 0},a})},b=()=>{try{return R.parse(p),n([]),!0}catch(t){if(t instanceof L){const r=[];p.urls.forEach((l,s)=>{r[s]={}}),t.errors.forEach(l=>{const s=l.path;if(s.length>=2&&typeof s[1]=="number"){const a=s[1],o=s[2];r[a][o]=l.message}}),n(r)}return!1}},g=()=>{b()&&f(h+1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full border-t sm:border-0 overflow-y-hidden p-2",children:[e.jsx(E,{title:"Additional Details"}),e.jsx(S,{children:p.urls.map((t,r)=>{var l,s,a,o,m,j;return e.jsx(U.div,{className:"mt-4 space-y-2",initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:30},transition:{duration:.8},children:e.jsxs("div",{className:"w-full flex gap-2 bg-white p-2 border rounded",children:[e.jsxs("div",{className:"w-full pt-1",children:[e.jsx(y,{children:"Offer Url"}),e.jsx(C,{type:"url",required:!0,placeholder:"https://www.example-offer.com",className:`py-4 ${(l=c[r])!=null&&l.url?"border-red-500":""}`,value:t.url,onChange:i=>x(r,"url",i.target.value)}),((s=c[r])==null?void 0:s.url)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:(a=c[r])==null?void 0:a.url})]}),e.jsxs("div",{className:"w-[300px]",children:[e.jsx(y,{children:"Device Type"}),e.jsxs(k,{required:!0,value:t.deviceType,onValueChange:i=>x(r,"deviceType",i),children:[e.jsx(I,{className:`h-10 my-1 ${(o=c[r])!=null&&o.deviceType?"border-red-500":""}`,children:e.jsx(A,{placeholder:"Device Type"})}),e.jsx(D,{side:"top",children:v.map(i=>e.jsx(F,{value:i,children:i},i))})]}),((m=c[r])==null?void 0:m.deviceType)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:(j=c[r])==null?void 0:j.deviceType})]}),e.jsx(d,{type:"button",onClick:()=>w(r),className:"text-red-500 bg-transparent mt-6 hover:bg-transparent hover:text-red-600",children:e.jsx(B,{})})]})},r)})}),e.jsx(d,{type:"button",onClick:N,variant:"ringHover",className:"mt-2",children:"Add URL"})]}),e.jsxs("div",{className:"flex w-full justify-end items-center mt-4",children:[h>1&&e.jsx(d,{onClick:()=>f(h-1),className:"mr-2",children:"Back"}),e.jsx(d,{onClick:g,className:"mr-2",children:"Next"})]})]})};export{W as default};
//# sourceMappingURL=Step3-Z_SIM2Zo.js.map
