{"version":3,"file":"index-pjDesYDr.js","sources":["../../../resources/js/Pages/Offers/components/update/index.tsx"],"sourcesContent":["import Authenticated from \"@/Layouts/AuthenticatedLayout\";\r\nimport { OfferType, PageProps } from \"@/types\";\r\nimport { useState } from \"react\";\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { useForm } from \"@inertiajs/react\";\r\nimport Stepper from \"@/components/ui/stepper\";\r\n\r\nimport { toast } from \"sonner\";\r\nimport Step2 from \"../create/steps/Step2\";\r\nimport Step3 from \"../create/steps/Step3\";\r\nimport Step4 from \"../create/steps/Step4\";\r\nimport Step5 from \"../create/steps/Step5\";\r\nimport Step1 from \"./steps/Step1\";\r\n\r\nexport default function Index({\r\n    auth,\r\n    offer,\r\n    users,\r\n}: PageProps<{ offer: OfferType; users: string }>) {\r\n    const [currentStep, setCurrentStep] = useState(1);\r\n    const [dataFetched, setDataFetched] = useState(false);\r\n    const [userDataFetched, setUserDataFetched] = useState(false);\r\n    const role = auth.user.role;\r\n    const [fetchedData, setFetchedData] = useState({\r\n        domains: [],\r\n        networks: [],\r\n        categories: [],\r\n    });\r\n    const [fetchedUsersData, setFetchedUsersData] = useState({\r\n        users: [],\r\n        countries: [],\r\n    });\r\n    const { put, processing, data, setData, errors, reset } = useForm({\r\n        title: offer.title,\r\n        description: offer.description,\r\n        keywords: offer.keywords,\r\n        image: offer.image,\r\n        age: offer.age,\r\n        rate: offer.rate,\r\n        encryption: offer.encryption,\r\n        network_id: offer.network_id,\r\n        domain_id: offer.domain_id,\r\n        category_id: offer.category_id,\r\n        proxy: offer.proxy,\r\n        users_ids: users,\r\n        countries: offer.countries,\r\n        status: offer.status,\r\n        appliableFor: offer.appliableFor,\r\n        urls: offer.urls,\r\n    });\r\n    const submitOffer = async (event: React.FormEvent) => {\r\n        event.preventDefault();\r\n        put(`/dashboard/offers/${offer.unique_id}`, {\r\n            onSuccess: () => {\r\n                toast.success(\"Offer has been updated!\");\r\n                reset();\r\n            },\r\n            onError: () => {\r\n                toast.error(\r\n                    \"An error occured while submitting form! Please check the form fields.\",\r\n                );\r\n                setCurrentStep(1);\r\n            },\r\n        });\r\n    };\r\n    const lastStep = 5;\r\n\r\n    const renderStep = () => {\r\n        switch (currentStep) {\r\n            case 1:\r\n                return (\r\n                    <Step1\r\n                        formData={data}\r\n                        setFormData={setData}\r\n                        errors={errors}\r\n                        currentStep={currentStep}\r\n                        setCurrentStep={setCurrentStep}\r\n                    />\r\n                );\r\n            case 2:\r\n                return (\r\n                    <Step2\r\n                        formData={data}\r\n                        setFormData={setData}\r\n                        errors={errors}\r\n                        dataFetched={dataFetched}\r\n                        setDataFetched={setDataFetched}\r\n                        currentStep={currentStep}\r\n                        setCurrentStep={setCurrentStep}\r\n                        fetchedData={fetchedData}\r\n                        setFetchedData={setFetchedData}\r\n                    />\r\n                );\r\n            case 3:\r\n                return (\r\n                    <Step3\r\n                        formData={data}\r\n                        setFormData={setData}\r\n                        currentStep={currentStep}\r\n                        setCurrentStep={setCurrentStep}\r\n                    />\r\n                );\r\n            case 4:\r\n                return (\r\n                    <Step4\r\n                        formData={data}\r\n                        setFormData={setData}\r\n                        errors={errors}\r\n                        userDataFetched={userDataFetched}\r\n                        setUserDataFetched={setUserDataFetched}\r\n                        currentStep={currentStep}\r\n                        setCurrentStep={setCurrentStep}\r\n                        fetchedUsersData={fetchedUsersData}\r\n                        setFetchedUsersData={setFetchedUsersData}\r\n                        role={role}\r\n                    />\r\n                );\r\n            case 5:\r\n                return (\r\n                    <Step5\r\n                        data={data}\r\n                        onClick={submitOffer}\r\n                        processing={processing}\r\n                        fetchedData={fetchedData}\r\n                        fetchedUsersData={fetchedUsersData}\r\n                    />\r\n                );\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    const stepperItems = [\r\n        \"Basic Information\",\r\n        \"Network Details\",\r\n        \"Additional Details\",\r\n        \"Target Details\",\r\n        \"Review\",\r\n    ];\r\n\r\n    return (\r\n        <Authenticated user={auth.user}>\r\n            <Stepper\r\n                stepperItems={stepperItems}\r\n                currentStep={currentStep}\r\n                setCurrentStep={setCurrentStep}\r\n                lastStep={lastStep}\r\n            />\r\n            <div className=\"mt-6 overflow-x-hidden\">\r\n                <AnimatePresence mode=\"wait\">\r\n                    <motion.div\r\n                        key={currentStep}\r\n                        initial={{ opacity: 0, x: 100 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        exit={{ opacity: 0, x: -100 }}\r\n                        transition={{ duration: 0.3 }}\r\n                    >\r\n                        {renderStep()}\r\n                    </motion.div>\r\n                </AnimatePresence>\r\n            </div>\r\n        </Authenticated>\r\n    );\r\n}\r\n"],"names":["Index","auth","offer","users","currentStep","setCurrentStep","useState","dataFetched","setDataFetched","userDataFetched","setUserDataFetched","role","fetchedData","setFetchedData","fetchedUsersData","setFetchedUsersData","put","processing","data","setData","errors","reset","useForm","submitOffer","event","toast","lastStep","renderStep","jsx","Step1","Step2","Step3","Step4","Step5","stepperItems","jsxs","Authenticated","Stepper","AnimatePresence","motion"],"mappings":"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"}