import{r as ee,W as re,j as e,B as h,R as se,J as A}from"./app-BOQZNA3r.js";import{I as ae}from"./input-DELo8El7.js";import{L as d}from"./label-DyIUDMiB.js";import{S as f,a as g,b as x,c as j,d as v}from"./select-D3RgUlHS.js";import{T as te}from"./textarea-CU9b8o3s.js";import{b as le}from"./index-BxJA8sjD.js";import{R as ie}from"./react-icons.esm-Bb_X1ijD.js";import{S as y}from"./search-select-4YQh_Y_H.js";import{I as b}from"./InputError-CGYjvlaJ.js";import{L as n}from"./LabelInputContainer-VaPF5sWp.js";import{M as F}from"./multi-select-DCCqSIAV.js";import"./use-combine-values-C7NWFPML.js";import"./motion-jev4RzsA.js";import"./index-BdQq_4o_.js";import"./index-BQAw569x.js";import"./index-DiQKiitX.js";import"./chevron-down-DmAu_b38.js";import"./command-DMsnYI8w.js";import"./dialog-BcfKVCAb.js";import"./index-CMPCDGMv.js";import"./search-FFPjmnRD.js";import"./index-DsGR-aJQ.js";import"./checkbox-DkbzEEfI.js";const oe=({domains:P,users:$,networks:B,countries:J,categories:G,offer:i,doneFunction:H})=>{var S,C,T,I,k,q,E,M,R,U,D,L;const w=["all","windows","mobiles","linux","android","iOs"],[m,u]=ee.useState({}),{put:O,processing:N,data:s,setData:l,errors:o}=re({offer_name:(S=i.offer)==null?void 0:S.offer_name,image:null,age:(C=i.offer)==null?void 0:C.age,rate:(T=i.offer)==null?void 0:T.rate,encryption:(I=i.offer)==null?void 0:I.encryption,network_id:(k=i.offer)==null?void 0:k.network_id,domain_id:(q=i.offer)==null?void 0:q.domain_id,category_id:(E=i.offer)==null?void 0:E.category_id,proxy:(M=i.offer)==null?void 0:M.proxy,details:(R=i.offer)==null?void 0:R.details,countries:(U=i.offer)==null?void 0:U.countries,status:(D=i.offer)==null?void 0:D.status,urls:(L=i.offer)==null?void 0:L.urls,users_ids:i.users}),W=()=>{l(r=>({...r,urls:[...r.urls,{url:"",deviceType:""}]}))},z=r=>{var a;const t=(a=r.target.files)==null?void 0:a[0];t&&l(c=>({...c,image:t}))},K=r=>{s.urls.length>1&&(l(t=>{const a=t.urls.filter((c,p)=>p!==r);return{...t,urls:a}}),u(t=>{const a={...t};return delete a[r],a}))},_=(r,t,a)=>{l(c=>{const p=c.urls.map((V,Z)=>Z===r?{...V,[t]:a}:V);return{...c,urls:p}}),t==="url"&&Q(r,a)},Q=(r,t)=>{try{new URL(t),u(a=>{const c={...a};return delete c[r],c})}catch{u(a=>({...a,[r]:"Invalid URL"}))}},X=s.urls.map(r=>r.deviceType),Y=async r=>{r.preventDefault(),O(`/dashboard/offers/${i.offer.unique_id}`,{onSuccess:()=>{A.success("Offer has been updated!"),H()},onError:t=>{A.error(t.offer_name)}})};return e.jsxs("form",{onSubmit:Y,className:"px-4 pb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsx(n,{type:"text",value:s.offer_name,onChange:r=>l({...s,offer_name:r.target.value}),required:!0,errorMessage:o.offer_name,description:"Enter a unique and descriptive name for the offer.",label:"Offer Name",helperText:"Offer Name",id:"offer-name"}),e.jsx(n,{type:"file",onChange:z,errorMessage:o.image,description:"Select an image for offer to show as an OG image.",label:"Selete Image",id:"offer-image"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsx(n,{type:"number",value:s.age,onChange:r=>l({...s,age:r.target.value}),required:!0,helperText:"18",errorMessage:o.age,description:"Specify the minimum age required to avail this offer.",label:"Age:",id:"age"}),e.jsx(n,{type:"number",value:s.rate,onChange:r=>l({...s,rate:r.target.value}),required:!0,helperText:"150",errorMessage:o.rate,description:"Enter the rate for this offer in your local currency.",label:"Rate:",id:"rate"}),e.jsx(n,{type:"number",value:s.encryption,onChange:r=>l({...s,encryption:r.target.value}),helperText:"****",errorMessage:o.encryption,description:"Specify the encryption level or code for the offer, if applicable.",label:"Encryption:",id:"encryption"})]}),e.jsx("div",{className:"w-full",children:e.jsx(y,{label:"Select Network",items:B,onSelect:r=>l({...s,network_id:r}),selected_value:s.network_id,description:"Choose the network associated with this offer.",errorMessage:o.network_id})}),e.jsxs("div",{className:"w-full grid grid-cols-3 gap-4",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(y,{label:"Select Domain",items:P,onSelect:r=>l({...s,domain_id:r}),selected_value:s.domain_id,description:"Select the domain where this offer will be available.",errorMessage:o.domain_id})}),e.jsxs("div",{className:"w-full",children:[e.jsx(d,{children:"Proxy check"}),e.jsxs(f,{required:!0,value:s.proxy,onValueChange:r=>l({...s,proxy:r}),children:[e.jsx(g,{className:"",children:e.jsx(x,{placeholder:"proxy"})}),e.jsx(j,{side:"top",children:["yes","no"].map(r=>e.jsx(v,{value:r,children:r},r))})]}),e.jsx(b,{message:o.proxy})]})]}),e.jsx(y,{label:"Select Category",items:G,onSelect:r=>l({...s,category_id:r}),selected_value:s.category_id,description:"Pick a category that best describes the offer.",errorMessage:o.category_id}),e.jsxs("div",{className:"w-full",children:[e.jsx(d,{htmlFor:"message",children:"About:"}),e.jsx(te,{name:"message",placeholder:"Something about the offer...",id:"message",onChange:r=>l({...s,details:r.target.value}),required:!0,defaultValue:s.details}),e.jsx("p",{className:"text-sm text-gray-500",children:"Provide a detailed description of the offer."}),e.jsx(b,{message:o.details})]})]}),e.jsxs("div",{className:"w-full border-t sm:border-0",children:[s.urls.map((r,t)=>e.jsxs("div",{className:"w-full flex gap-2",children:[e.jsxs("div",{className:"w-full pt-1",children:[e.jsx(d,{children:"Offer Url"}),e.jsx(ae,{type:"url",required:!0,placeholder:"https://www.example-offer.com",className:`py-4 ${m[t]?"border-red-500":""}`,value:r.url,onChange:a=>_(t,"url",a.target.value)}),m[t]&&e.jsx("p",{className:"text-red-500 text-sm",children:m[t]})]}),e.jsxs("div",{className:"w-[300px]",children:[e.jsx(d,{children:"Device Type"}),e.jsxs(f,{required:!0,value:r.deviceType,onValueChange:a=>_(t,"deviceType",a),children:[e.jsx(g,{className:"h-10 my-1",children:e.jsx(x,{placeholder:"Device Type"})}),e.jsx(j,{side:"top",children:w.filter(a=>!X.includes(a)||a===r.deviceType).map(a=>e.jsx(v,{value:a,children:a},a))})]})]}),e.jsx(h,{type:"button",onClick:()=>K(t),className:"text-red-500 bg-transparent mt-6 hover:bg-transparent hover:text-red-600",children:e.jsx(le,{})})]},t)),s.urls.length<w.length&&e.jsx(h,{type:"button",onClick:W,variant:"ringHover",className:"mt-2",children:"Add URL"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx(F,{items:$,selectedItems:s.users_ids,onSelect:r=>l({...s,users_ids:r}),label:"Select Users"}),e.jsx(F,{items:J,selectedItems:s.countries,onSelect:r=>l({...s,countries:r}),label:"Select countries"})]})]})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"w-full items-center justify-end flex gap-2",children:[e.jsxs("div",{className:"w-full lg:max-w-36",children:[e.jsxs(f,{required:!0,value:s.status,onValueChange:r=>l({...s,status:r}),children:[e.jsx(g,{className:"h-10 my-1",children:e.jsx(x,{placeholder:"Select status"})}),e.jsx(j,{side:"top",children:["active","inactive","paused"].map(r=>e.jsx(v,{value:r,children:r},r))})]}),e.jsx(b,{message:o.status})]}),e.jsx(h,{type:"submit",disabled:N,variant:"gooeyRight",children:N?e.jsxs(se.Fragment,{children:[e.jsx(ie,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Submit"})]})]})},Ee=oe;export{Ee as default};
//# sourceMappingURL=UpdateForm-BEgb_hhU.js.map
