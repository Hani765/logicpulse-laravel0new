import{j as n,c as C,L as k,r as t}from"./app-BOQZNA3r.js";import{C as N,H as q,a as _,b as D,c as V}from"./command-DMsnYI8w.js";import{C as L}from"./checkbox-DkbzEEfI.js";import{X as S}from"./index-CMPCDGMv.js";const A=k("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function E({className:l,variant:a,...o}){return n.jsx("div",{className:C(A({variant:a}),l),...o})}function F({items:l,selectedItems:a,onSelect:o,descriptoin:d,label:f}){const p=t.useRef(null),[b,x]=t.useState(!1),[c,v]=t.useState(""),[i,m]=t.useState(!1),g=t.useCallback(e=>{const s=a.split(",").filter(r=>r!==e.unique_id).join(",");o(s)},[a,o]),j=t.useCallback(()=>{if(i)o("");else{const e=l.map(s=>s.unique_id).join(",");o(e)}m(!i)},[i,l,o]),w=t.useCallback(e=>{const s=p.current;if(s){if((e.key==="Delete"||e.key==="Backspace")&&s.value===""){const r=a.split(",").slice(0,-1).join(",");o(r)}e.key==="Escape"&&s.blur()}},[a,o]),u=a.split(","),h=l.filter(e=>!u.includes(e.unique_id)).filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.unique_id.toLowerCase().includes(c.toLowerCase()));t.useEffect(()=>{const e=l.map(s=>s.unique_id);m(e.length===u.length)},[l,u]);const y=t.useCallback(e=>{const s=a.split(",").filter(Boolean),r=[...new Set([...s,e.unique_id])].join(",");o(r)},[a,o]);return n.jsxs(n.Fragment,{children:[n.jsxs(N,{onKeyDown:w,className:"overflow-visible bg-transparent",children:[n.jsxs("div",{className:"",children:[n.jsxs("div",{className:"items-center justify-between flex",children:[n.jsx("label",{className:"",children:f}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{children:"Select All"}),n.jsx(L,{checked:i,onCheckedChange:j,className:"form-checkbox"})]})]}),n.jsxs("div",{className:"flex gap-2 flex-wrap overflow-y-auto max-h-[200px] group rounded-md border border-input px-3 py-2 text-sm ring-offset-background focus-within:ring-1 focus-within:ring-ring focus-within:ring-offset-1",children:[u.map(e=>{const s=l.find(r=>r.unique_id===e);return s?n.jsxs(E,{variant:"secondary",children:[s.name,n.jsx("button",{className:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:r=>{r.key==="Enter"&&g(s)},onMouseDown:r=>{r.preventDefault(),r.stopPropagation()},onClick:()=>g(s),children:n.jsx(S,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},s.unique_id):null}),n.jsx(q.Input,{ref:p,value:c,onValueChange:v,onBlur:()=>x(!1),onFocus:()=>x(!0),placeholder:`${f}...`,className:"ml-2 flex-1 bg-transparent outline-none placeholder:text-muted-foreground"})]})]}),n.jsx("div",{className:"relative mt-2",children:n.jsx(_,{children:b&&h.length>0?n.jsx("div",{className:"absolute top-0 z-10 w-full rounded-md border bg-popover text-popover-foreground shadow-md outline-none animate-in",children:n.jsx(D,{className:"h-full overflow-auto",children:h.map(e=>n.jsx(V,{onMouseDown:s=>{s.preventDefault(),s.stopPropagation()},onSelect:()=>{y(e)},className:"cursor-pointer",children:e.name},e.unique_id))})}):null})}),d&&n.jsx("p",{className:"text-sm text-gray-500",children:d})]})," "]})}export{F as M};
//# sourceMappingURL=multi-select-DCCqSIAV.js.map
