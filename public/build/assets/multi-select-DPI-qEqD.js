import{r as l,j as s}from"./app-CkWx0ziT.js";import{B as k}from"./badge-DKcNn6KQ.js";import{C as N,H as y,b as q,d as _,e as D}from"./command-Bi-o4Peo.js";import{C as L}from"./checkbox-CtxrMbYo.js";import{L as S}from"./label-BJBSjzRP.js";import{X as A}from"./index-BI6CrKg2.js";function F({items:r,selectedItems:t,onSelect:a,descriptoin:d,label:f}){const p=l.useRef(null),[j,m]=l.useState(!1),[c,b]=l.useState(""),[i,x]=l.useState(!1),h=l.useCallback(e=>{const n=t.split(",").filter(o=>o!==e.unique_id).join(",");a(n)},[t,a]),w=l.useCallback(()=>{if(i)a("");else{const e=r.map(n=>n.unique_id).join(",");a(e)}x(!i)},[i,r,a]),v=l.useCallback(e=>{const n=p.current;if(n){if((e.key==="Delete"||e.key==="Backspace")&&n.value===""){const o=t.split(",").slice(0,-1).join(",");a(o)}e.key==="Escape"&&n.blur()}},[t,a]),u=t.split(","),g=r.filter(e=>!u.includes(e.unique_id)).filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.unique_id.toLowerCase().includes(c.toLowerCase()));l.useEffect(()=>{const e=r.map(n=>n.unique_id);x(e.length===u.length)},[r,u]);const C=l.useCallback(e=>{const n=t.split(",").filter(Boolean),o=[...new Set([...n,e.unique_id])].join(",");a(o)},[t,a]);return s.jsxs(s.Fragment,{children:[s.jsxs(N,{onKeyDown:v,className:"overflow-visible bg-transparent",children:[s.jsxs("div",{className:"mt-1",children:[s.jsxs("div",{className:"items-center justify-between flex",children:[s.jsx(S,{className:"",children:f}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{children:"Select All"}),s.jsx(L,{checked:i,onCheckedChange:w,className:"form-checkbox"})]})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap overflow-y-auto max-h-[200px] group rounded-md border border-input px-3 py-2 text-sm ring-offset-background focus-within:ring-1 focus-within:ring-ring focus-within:ring-offset-1",children:[u.map(e=>{const n=r.find(o=>o.unique_id===e);return n?s.jsxs(k,{variant:"secondary",children:[n.name,s.jsx("button",{className:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:o=>{o.key==="Enter"&&h(n)},onMouseDown:o=>{o.preventDefault(),o.stopPropagation()},onClick:()=>h(n),children:s.jsx(A,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},n.unique_id):null}),s.jsx(y.Input,{ref:p,value:c,onValueChange:b,onBlur:()=>m(!1),onFocus:()=>m(!0),placeholder:`${f}...`,className:"ml-2 flex-1 bg-transparent outline-none placeholder:text-muted-foreground"})]})]}),s.jsx("div",{className:"relative mt-2",children:s.jsx(q,{children:j&&g.length>0?s.jsx("div",{className:"absolute top-0 z-10 w-full rounded-md border bg-popover text-popover-foreground shadow-md outline-none animate-in",children:s.jsx(_,{className:"h-full overflow-auto",children:g.map(e=>s.jsx(D,{onMouseDown:n=>{n.preventDefault(),n.stopPropagation()},onSelect:()=>{C(e)},className:"cursor-pointer",children:e.name},e.unique_id))})}):null})}),d&&s.jsx("p",{className:"text-sm text-gray-500",children:d})]})," "]})}export{F as M};
//# sourceMappingURL=multi-select-DPI-qEqD.js.map
