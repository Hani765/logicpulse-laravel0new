{"version":3,"file":"create-BUrsxkG7.js","sources":["../../../resources/js/Pages/Offers/components/create/create.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { buttonVariants } from \"@/components/ui/button\";\r\nimport { toast } from \"sonner\";\r\nimport CreateForm from \"./createForm\";\r\nimport {\r\n    Drawer,\r\n    DrawerClose,\r\n    DrawerContent,\r\n    DrawerDescription,\r\n    DrawerHeader,\r\n    DrawerTitle,\r\n    DrawerTrigger,\r\n} from \"@/components/ui/drawer\";\r\nimport { MdClose } from \"react-icons/md\";\r\nimport { CountryType, DomainsType, NetworkType, UserType } from \"@/types\";\r\nimport OffersFormSkeleton from \"@/components/skeletons/offersForm\";\r\n\r\nexport default function Create() {\r\n    const [open, setOpen] = useState(false);\r\n    const [data, setData] = useState({\r\n        domains: [],\r\n        users: [],\r\n        networks: [],\r\n        countries: [],\r\n        categories: [],\r\n    });\r\n    const [fetching, setFetching] = useState(true);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const responses = await Promise.all([\r\n                fetch(\"/fetch/domains\"),\r\n                fetch(\"/fetch/all-users\"),\r\n                fetch(\"/fetch/networks\"),\r\n                fetch(\"/fetch/countriesData\"),\r\n                fetch(\"/fetch/categories\"),\r\n            ]);\r\n\r\n            const [domains, users, networks, countries, categories] =\r\n                await Promise.all(\r\n                    responses.map((res) =>\r\n                        res.ok ? res.json() : Promise.reject(res)\r\n                    )\r\n                );\r\n\r\n            setData({ domains, users, networks, countries, categories });\r\n            setFetching(false);\r\n        } catch (error) {\r\n            toast.error(\"Failed to fetch data. Please try again later.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Drawer\r\n            direction=\"top\"\r\n            dismissible={false}\r\n            open={open}\r\n            onOpenChange={setOpen}\r\n        >\r\n            <div className=\"bg-white border border-gray-200 dark:border-gray-700 dark:bg-gray-900 w-full shadow-sm flex justify-between items-center p-2 rounded\">\r\n                <h3 className=\"font-semibold\">Offers</h3>\r\n                <DrawerTrigger>\r\n                    <p\r\n                        onClick={fetchData}\r\n                        className={`${buttonVariants({\r\n                            variant: \"gooeyRight\",\r\n                        })}`}\r\n                    >\r\n                        Create New\r\n                    </p>\r\n                </DrawerTrigger>\r\n            </div>\r\n            <DrawerContent\r\n                className=\"h-full rounded-none\"\r\n                onInteractOutside={(e) => e.preventDefault()}\r\n            >\r\n                <div className=\"h-screen overflow-y-auto\">\r\n                    <DrawerHeader>\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <DrawerTitle>Create new offer</DrawerTitle>\r\n                            <DrawerClose>\r\n                                <MdClose />\r\n                            </DrawerClose>\r\n                        </div>\r\n                        <DrawerDescription>\r\n                            Fill out the form below to create a new offer.\r\n                            Provide the necessary details including domain,\r\n                            network, users, and target countries to ensure the\r\n                            offer is configured correctly.\r\n                        </DrawerDescription>\r\n                    </DrawerHeader>\r\n                    {fetching ? (\r\n                        <OffersFormSkeleton />\r\n                    ) : (\r\n                        <CreateForm\r\n                            domains={data.domains}\r\n                            networks={data.networks}\r\n                            users={data.users}\r\n                            countries={data.countries}\r\n                            categories={data.categories}\r\n                            doneFunction={() => setOpen(false)}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </DrawerContent>\r\n        </Drawer>\r\n    );\r\n}\r\n"],"names":["Create","open","setOpen","useState","data","setData","fetching","setFetching","fetchData","responses","domains","users","networks","countries","categories","res","toast","jsxs","Drawer","jsx","DrawerTrigger","buttonVariants","DrawerContent","e","DrawerHeader","DrawerTitle","DrawerClose","MdClose","DrawerDescription","OffersFormSkeleton","CreateForm"],"mappings":"w7BAmBA,SAAwBA,IAAS,CAC7B,KAAM,CAACC,EAAMC,CAAO,EAAIC,WAAS,EAAK,EAChC,CAACC,EAAMC,CAAO,EAAIF,WAAS,CAC7B,QAAS,CAAC,EACV,MAAO,CAAC,EACR,SAAU,CAAC,EACX,UAAW,CAAC,EACZ,WAAY,CAAC,CAAA,CAChB,EACK,CAACG,EAAUC,CAAW,EAAIJ,WAAS,EAAI,EAEvCK,EAAY,SAAY,CACtB,GAAA,CACM,MAAAC,EAAY,MAAM,QAAQ,IAAI,CAChC,MAAM,gBAAgB,EACtB,MAAM,kBAAkB,EACxB,MAAM,iBAAiB,EACvB,MAAM,sBAAsB,EAC5B,MAAM,mBAAmB,CAAA,CAC5B,EAEK,CAACC,EAASC,EAAOC,EAAUC,EAAWC,CAAU,EAClD,MAAM,QAAQ,IACVL,EAAU,IAAKM,GACXA,EAAI,GAAKA,EAAI,OAAS,QAAQ,OAAOA,CAAG,CAC5C,CAAA,EAGRV,EAAQ,CAAE,QAAAK,EAAS,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,WAAAC,EAAY,EAC3DP,EAAY,EAAK,OACL,CACZS,EAAM,MAAM,+CAA+C,CAC/D,CAAA,EAIA,OAAAC,EAAA,KAACC,EAAA,CACG,UAAU,MACV,YAAa,GACb,KAAAjB,EACA,aAAcC,EAEd,SAAA,CAACe,EAAAA,KAAA,MAAA,CAAI,UAAU,uIACX,SAAA,CAACE,EAAA,IAAA,KAAA,CAAG,UAAU,gBAAgB,SAAM,SAAA,QACnCC,EACG,CAAA,SAAAD,EAAA,IAAC,IAAA,CACG,QAASX,EACT,UAAW,GAAGa,EAAe,CACzB,QAAS,YACZ,CAAA,CAAC,GACL,SAAA,YAAA,CAAA,EAGL,CAAA,EACJ,EACAF,EAAA,IAACG,EAAA,CACG,UAAU,sBACV,kBAAoBC,GAAMA,EAAE,eAAe,EAE3C,SAAAN,EAAA,KAAC,MAAI,CAAA,UAAU,2BACX,SAAA,CAAAA,OAACO,EACG,CAAA,SAAA,CAACP,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAE,EAAAA,IAACM,GAAY,SAAgB,kBAAA,CAAA,EAC5BN,EAAA,IAAAO,EAAA,CACG,SAACP,EAAA,IAAAQ,EAAA,CAAQ,CAAA,EACb,CAAA,EACJ,EACAR,EAAAA,IAACS,GAAkB,SAKnB,kLAAA,CAAA,CAAA,EACJ,EACCtB,EACIa,EAAA,IAAAU,EAAA,CAAA,CAAmB,EAEpBV,EAAA,IAACW,EAAA,CACG,QAAS1B,EAAK,QACd,SAAUA,EAAK,SACf,MAAOA,EAAK,MACZ,UAAWA,EAAK,UAChB,WAAYA,EAAK,WACjB,aAAc,IAAMF,EAAQ,EAAK,CAAA,CACrC,CAAA,EAER,CAAA,CACJ,CAAA,CAAA,CAAA,CAGZ"}