{"version":3,"file":"update-C02I36mZ.js","sources":["../../../resources/js/Pages/Offers/components/update/update.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { buttonVariants } from \"@/components/ui/button\";\r\nimport { toast } from \"sonner\";\r\nimport {\r\n    Drawer,\r\n    DrawerClose,\r\n    DrawerContent,\r\n    DrawerHeader,\r\n    DrawerDescription,\r\n    DrawerTitle,\r\n    DrawerTrigger,\r\n} from \"@/components/ui/drawer\";\r\nimport UpdateForm from \"./UpdateForm\";\r\nimport { CountryType, DomainsType, NetworkType, UserType } from \"@/types\";\r\nimport OffersFormSkeleton from \"@/components/skeletons/offersForm\";\r\nimport { MdClose } from \"react-icons/md\";\r\nimport { FaPencil } from \"react-icons/fa6\";\r\n\r\ninterface UpdateProps {\r\n    unique_id: string;\r\n}\r\n\r\nexport default function Update({ unique_id }: UpdateProps) {\r\n    const [open, setOpen] = useState(false);\r\n    const [data, setData] = useState({\r\n        offer: {},\r\n        domains: [],\r\n        users: [],\r\n        networks: [],\r\n        countries: [],\r\n        categories: [],\r\n    });\r\n    const [fetching, setFetching] = useState(true);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const responses = await Promise.all([\r\n                fetch(`/dashboard/offers/${unique_id}`),\r\n                fetch(\"/fetch/domains\"),\r\n                fetch(\"/fetch/all-users\"),\r\n                fetch(\"/fetch/networks\"),\r\n                fetch(\"/fetch/countriesData\"),\r\n                fetch(\"/fetch/categories\"),\r\n            ]);\r\n\r\n            const [offer, domains, users, networks, countries, categories] =\r\n                await Promise.all(\r\n                    responses.map((res) =>\r\n                        res.ok ? res.json() : Promise.reject(res)\r\n                    )\r\n                );\r\n\r\n            setData({ offer, domains, users, networks, countries, categories });\r\n            setFetching(false);\r\n        } catch (error) {\r\n            toast.error(\"Failed to fetch data. Please try again later.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Drawer\r\n            open={open}\r\n            onOpenChange={setOpen}\r\n            direction=\"top\"\r\n            dismissible={false}\r\n        >\r\n            <DrawerTrigger className=\"w-full\" onClick={fetchData}>\r\n                <p\r\n                    className={`w-full flex gap-4 ${buttonVariants({\r\n                        variant: \"ghost\",\r\n                    })}`}\r\n                >\r\n                    Edit\r\n                    <FaPencil size={11} />\r\n                </p>\r\n            </DrawerTrigger>\r\n            <DrawerContent\r\n                className=\"h-full rounded-none\"\r\n                onInteractOutside={(e) => e.preventDefault()}\r\n            >\r\n                <div className=\"h-screen overflow-y-auto\">\r\n                    <DrawerHeader>\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <DrawerTitle>Update offer</DrawerTitle>\r\n                            <DrawerClose>\r\n                                <MdClose />\r\n                            </DrawerClose>\r\n                        </div>\r\n                        <DrawerDescription>\r\n                            Fill out the form below to create a new offer.\r\n                            Provide the necessary details including domain,\r\n                            network, users, and target countries to ensure the\r\n                            offer is configured correctly.\r\n                        </DrawerDescription>\r\n                    </DrawerHeader>\r\n                    {fetching ? (\r\n                        <OffersFormSkeleton />\r\n                    ) : (\r\n                        <UpdateForm\r\n                            categories={data.categories}\r\n                            domains={data.domains}\r\n                            networks={data.networks}\r\n                            users={data.users}\r\n                            countries={data.countries}\r\n                            offer={data.offer}\r\n                            doneFunction={() => setOpen(false)}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </DrawerContent>\r\n        </Drawer>\r\n    );\r\n}\r\n"],"names":["Update","unique_id","open","setOpen","useState","data","setData","fetching","setFetching","fetchData","responses","offer","domains","users","networks","countries","categories","res","toast","jsxs","Drawer","jsx","DrawerTrigger","buttonVariants","FaPencil","DrawerContent","e","DrawerHeader","DrawerTitle","DrawerClose","MdClose","DrawerDescription","OffersFormSkeleton","UpdateForm"],"mappings":"o8BAwBwB,SAAAA,GAAO,CAAE,UAAAC,GAA0B,CACvD,KAAM,CAACC,EAAMC,CAAO,EAAIC,WAAS,EAAK,EAChC,CAACC,EAAMC,CAAO,EAAIF,WAAS,CAC7B,MAAO,CAAC,EACR,QAAS,CAAC,EACV,MAAO,CAAC,EACR,SAAU,CAAC,EACX,UAAW,CAAC,EACZ,WAAY,CAAC,CAAA,CAChB,EACK,CAACG,EAAUC,CAAW,EAAIJ,WAAS,EAAI,EAEvCK,EAAY,SAAY,CACtB,GAAA,CACM,MAAAC,EAAY,MAAM,QAAQ,IAAI,CAChC,MAAM,qBAAqBT,CAAS,EAAE,EACtC,MAAM,gBAAgB,EACtB,MAAM,kBAAkB,EACxB,MAAM,iBAAiB,EACvB,MAAM,sBAAsB,EAC5B,MAAM,mBAAmB,CAAA,CAC5B,EAEK,CAACU,EAAOC,EAASC,EAAOC,EAAUC,EAAWC,CAAU,EACzD,MAAM,QAAQ,IACVN,EAAU,IAAKO,GACXA,EAAI,GAAKA,EAAI,OAAS,QAAQ,OAAOA,CAAG,CAC5C,CAAA,EAGRX,EAAQ,CAAE,MAAAK,EAAO,QAAAC,EAAS,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,WAAAC,EAAY,EAClER,EAAY,EAAK,OACL,CACZU,EAAM,MAAM,+CAA+C,CAC/D,CAAA,EAIA,OAAAC,EAAA,KAACC,EAAA,CACG,KAAAlB,EACA,aAAcC,EACd,UAAU,MACV,YAAa,GAEb,SAAA,CAAAkB,EAAA,IAACC,EAAc,CAAA,UAAU,SAAS,QAASb,EACvC,SAAAU,EAAA,KAAC,IAAA,CACG,UAAW,qBAAqBI,EAAe,CAC3C,QAAS,OACZ,CAAA,CAAC,GACL,SAAA,CAAA,OAEGF,EAAAA,IAACG,EAAS,CAAA,KAAM,EAAI,CAAA,CAAA,CAAA,CAAA,EAE5B,EACAH,EAAA,IAACI,EAAA,CACG,UAAU,sBACV,kBAAoBC,GAAMA,EAAE,eAAe,EAE3C,SAAAP,EAAA,KAAC,MAAI,CAAA,UAAU,2BACX,SAAA,CAAAA,OAACQ,EACG,CAAA,SAAA,CAACR,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAE,EAAAA,IAACO,GAAY,SAAY,cAAA,CAAA,EACxBP,EAAA,IAAAQ,EAAA,CACG,SAACR,EAAA,IAAAS,EAAA,CAAQ,CAAA,EACb,CAAA,EACJ,EACAT,EAAAA,IAACU,GAAkB,SAKnB,kLAAA,CAAA,CAAA,EACJ,EACCxB,EACIc,EAAA,IAAAW,EAAA,CAAA,CAAmB,EAEpBX,EAAA,IAACY,EAAA,CACG,WAAY5B,EAAK,WACjB,QAASA,EAAK,QACd,SAAUA,EAAK,SACf,MAAOA,EAAK,MACZ,UAAWA,EAAK,UAChB,MAAOA,EAAK,MACZ,aAAc,IAAMF,EAAQ,EAAK,CAAA,CACrC,CAAA,EAER,CAAA,CACJ,CAAA,CAAA,CAAA,CAGZ"}