{"version":3,"file":"update-C7aQL3PT.js","sources":["../../../resources/js/Pages/Users/components/update/update.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport { Button, buttonVariants } from \"@/components/ui/button\";\r\nimport { toast } from \"sonner\";\r\nimport UpdateForm from \"./UpdateForm\";\r\nimport {\r\n    Drawer,\r\n    DrawerClose,\r\n    DrawerContent,\r\n    DrawerDescription,\r\n    DrawerHeader,\r\n    DrawerTitle,\r\n    DrawerTrigger,\r\n} from \"@/components/ui/drawer\";\r\nimport { MdClose } from \"react-icons/md\";\r\nimport { DomainsType, OfferType, UserType } from \"@/types\";\r\nimport { UserCreateUpdateSkeleton } from \"@/components/skeletons/userCreateUpdateSkeleton\";\r\nimport { FaPencil } from \"react-icons/fa6\";\r\n\r\ninterface CreateProps {\r\n    role: string;\r\n    unique_id: string;\r\n}\r\nexport default function Update({ role, unique_id }: CreateProps) {\r\n    const [open, setOpen] = useState(false);\r\n    const [dataDomain, setDataDomain] = useState<DomainsType[]>([]);\r\n    const [dataOffers, setDataOffers] = useState<OfferType[]>([]);\r\n    const [dataUser, setDatauser] = useState<UserType[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const fetchData = async () => {\r\n        setOpen(true);\r\n        const responseUsers = await fetch(`users/${unique_id}`);\r\n        if (responseUsers.ok) {\r\n            const userData = await responseUsers.json();\r\n            setDatauser(userData);\r\n            const responseOffers = await fetch(\"/fetch/offers\");\r\n            if (responseOffers.ok) {\r\n                const offersData = await responseOffers.json();\r\n                setDataOffers(offersData);\r\n                const responseDomains = await fetch(\"/fetch/domains\");\r\n                if (responseDomains.ok) {\r\n                    const domainData = await responseDomains.json();\r\n                    setDataDomain(domainData);\r\n                    setLoading(false);\r\n                }\r\n            }\r\n        } else {\r\n            toast.error(\"Failed to fetch Data. Please try again later.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Drawer\r\n                open={open}\r\n                onOpenChange={setOpen}\r\n                direction=\"top\"\r\n                dismissible={false}\r\n            >\r\n                <DrawerTrigger className=\"w-full\">\r\n                    <p\r\n                        className={`w-full flex gap-4 ${buttonVariants({\r\n                            variant: \"ghost\",\r\n                        })}`}\r\n                        onClick={fetchData}\r\n                    >\r\n                        Edit\r\n                        <FaPencil size={11} />\r\n                    </p>\r\n                </DrawerTrigger>\r\n                <DrawerContent\r\n                    className=\"h-full rounded-none z-50 overflow-visible\"\r\n                    onInteractOutside={(e) => e.preventDefault()}\r\n                >\r\n                    <div className=\"h-screen overflow-y-auto p-4\">\r\n                        <DrawerHeader>\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <DrawerTitle>Update user</DrawerTitle>\r\n                                <DrawerClose>\r\n                                    <MdClose />\r\n                                </DrawerClose>\r\n                            </div>\r\n                            <DrawerDescription>\r\n                                Fill out the form below to add a new user.\r\n                                Please provide the necessary details including\r\n                                domain and offer information to ensure the user\r\n                                is set up correctly. Once all the fields are\r\n                                completed, click the submit button to create the\r\n                                user.\r\n                            </DrawerDescription>\r\n                        </DrawerHeader>\r\n                        {loading ? (\r\n                            <UserCreateUpdateSkeleton />\r\n                        ) : (\r\n                            <UpdateForm\r\n                                user={dataUser}\r\n                                domains={dataDomain}\r\n                                offers={dataOffers}\r\n                                doneFunction={() => setOpen(false)}\r\n                                role={role}\r\n                            />\r\n                        )}\r\n                    </div>\r\n                </DrawerContent>\r\n            </Drawer>\r\n        </>\r\n    );\r\n}\r\n"],"names":["Update","role","unique_id","open","setOpen","useState","dataDomain","setDataDomain","dataOffers","setDataOffers","dataUser","setDatauser","loading","setLoading","fetchData","responseUsers","userData","responseOffers","offersData","responseDomains","domainData","toast","jsx","Fragment","jsxs","Drawer","DrawerTrigger","buttonVariants","FaPencil","DrawerContent","e","DrawerHeader","DrawerTitle","DrawerClose","MdClose","DrawerDescription","UserCreateUpdateSkeleton","UpdateForm"],"mappings":"wjCAuBA,SAAwBA,GAAO,CAAE,KAAAC,EAAM,UAAAC,GAA0B,CAC7D,KAAM,CAACC,EAAMC,CAAO,EAAIC,WAAS,EAAK,EAChC,CAACC,EAAYC,CAAa,EAAIF,EAAA,SAAwB,CAAE,CAAA,EACxD,CAACG,EAAYC,CAAa,EAAIJ,EAAA,SAAsB,CAAE,CAAA,EACtD,CAACK,EAAUC,CAAW,EAAIN,EAAA,SAAqB,CAAE,CAAA,EACjD,CAACO,EAASC,CAAU,EAAIR,WAAS,EAAI,EACrCS,EAAY,SAAY,CAC1BV,EAAQ,EAAI,EACZ,MAAMW,EAAgB,MAAM,MAAM,SAASb,CAAS,EAAE,EACtD,GAAIa,EAAc,GAAI,CACZ,MAAAC,EAAW,MAAMD,EAAc,OACrCJ,EAAYK,CAAQ,EACd,MAAAC,EAAiB,MAAM,MAAM,eAAe,EAClD,GAAIA,EAAe,GAAI,CACb,MAAAC,EAAa,MAAMD,EAAe,OACxCR,EAAcS,CAAU,EAClB,MAAAC,EAAkB,MAAM,MAAM,gBAAgB,EACpD,GAAIA,EAAgB,GAAI,CACd,MAAAC,EAAa,MAAMD,EAAgB,OACzCZ,EAAca,CAAU,EACxBP,EAAW,EAAK,CACpB,CACJ,CAAA,MAEAQ,EAAM,MAAM,+CAA+C,CAC/D,EAGJ,OAEQC,MAAAC,EAAAA,SAAA,CAAA,SAAAC,EAAA,KAACC,EAAA,CACG,KAAAtB,EACA,aAAcC,EACd,UAAU,MACV,YAAa,GAEb,SAAA,CAACkB,EAAAA,IAAAI,EAAA,CAAc,UAAU,SACrB,SAAAF,EAAA,KAAC,IAAA,CACG,UAAW,qBAAqBG,EAAe,CAC3C,QAAS,OACZ,CAAA,CAAC,GACF,QAASb,EACZ,SAAA,CAAA,OAEGQ,EAAAA,IAACM,EAAS,CAAA,KAAM,EAAI,CAAA,CAAA,CAAA,CAAA,EAE5B,EACAN,EAAA,IAACO,EAAA,CACG,UAAU,4CACV,kBAAoBC,GAAMA,EAAE,eAAe,EAE3C,SAAAN,EAAA,KAAC,MAAI,CAAA,UAAU,+BACX,SAAA,CAAAA,OAACO,EACG,CAAA,SAAA,CAACP,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAF,EAAAA,IAACU,GAAY,SAAW,aAAA,CAAA,EACvBV,EAAA,IAAAW,EAAA,CACG,SAACX,EAAA,IAAAY,EAAA,CAAQ,CAAA,EACb,CAAA,EACJ,EACAZ,EAAAA,IAACa,GAAkB,SAOnB,+OAAA,CAAA,CAAA,EACJ,EACCvB,EACIU,EAAA,IAAAc,EAAA,CAAA,CAAyB,EAE1Bd,EAAA,IAACe,EAAA,CACG,KAAM3B,EACN,QAASJ,EACT,OAAQE,EACR,aAAc,IAAMJ,EAAQ,EAAK,EACjC,KAAAH,CAAA,CACJ,CAAA,EAER,CAAA,CACJ,CAAA,CAAA,CAER,CAAA,CAAA,CAER"}