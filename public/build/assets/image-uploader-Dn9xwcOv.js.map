{"version":3,"file":"image-uploader-Dn9xwcOv.js","sources":["../../../resources/js/components/ui/image-uploader.tsx"],"sourcesContent":["import React, { FormEventHandler, useState } from \"react\";\r\nimport {\r\n    Credenza,\r\n    CredenzaContent,\r\n    CredenzaDescription,\r\n    CredenzaHeader,\r\n    CredenzaTitle,\r\n    CredenzaTrigger,\r\n} from \"./credenza\";\r\nimport { Input } from \"./input\";\r\nimport { Label } from \"./label\";\r\nimport SubmitBtn from \"./SubmitBtn\";\r\nimport axios from \"axios\";\r\nimport { Button } from \"./button\";\r\nimport ProfilePic from \"./profile_pic\";\r\n\r\nexport default function ImageUploader({\r\n    onUpload,\r\n    selected_image,\r\n}: {\r\n    onUpload: any;\r\n    selected_image: any;\r\n}) {\r\n    const [image, setImage] = useState<File | null>(null);\r\n    const [imagePath, setImagePath] = useState<string | null>(null);\r\n    const [errors, setErrors] = useState({\r\n        profile_image: [],\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleImageChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = event.target.files?.[0];\r\n        if (file) {\r\n            setImage(file);\r\n        }\r\n    };\r\n\r\n    const handleSubmit: FormEventHandler<HTMLFormElement> = async (e) => {\r\n        e.preventDefault();\r\n        if (!image) {\r\n            alert(\"Please select an image to upload\");\r\n            return;\r\n        }\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"image\", image);\r\n\r\n        try {\r\n            setLoading(true);\r\n            const response = await axios.post(\"/upload/image\", formData, {\r\n                headers: {\r\n                    \"Content-Type\": \"multipart/form-data\",\r\n                },\r\n            });\r\n\r\n            setImagePath(response.data.path);\r\n            onUpload(response.data.path);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            setLoading(false);\r\n            if (axios.isAxiosError(error) && error.response?.data?.errors) {\r\n                setErrors(error.response.data.errors);\r\n            } else {\r\n                console.error(\"An error occurred during image upload\", error);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Credenza>\r\n            <CredenzaTrigger className=\"gap-2 flex items-center\">\r\n                <ProfilePic path={selected_image} />\r\n                <Button variant=\"outline\">Upload Image</Button>\r\n            </CredenzaTrigger>\r\n            <CredenzaContent className=\"overflow-x-hidden\">\r\n                <CredenzaHeader>\r\n                    <CredenzaTitle>Upload Image</CredenzaTitle>\r\n                    <CredenzaDescription>\r\n                        Upload an image to see the path\r\n                    </CredenzaDescription>\r\n                </CredenzaHeader>\r\n                <form className=\"space-y-2\" onSubmit={handleSubmit}>\r\n                    <div className=\"space-y-1\">\r\n                        <Label>Upload Image:</Label>\r\n                        <Input\r\n                            type=\"file\"\r\n                            onChange={handleImageChange}\r\n                            accept=\"image/png,image/svg,image/jpeg,image/webp\"\r\n                        />\r\n                    </div>\r\n                    <SubmitBtn\r\n                        label=\"Upload Image\"\r\n                        processing={loading}\r\n                        className=\"w-full\"\r\n                    />\r\n                </form>\r\n                {imagePath && (\r\n                    <div className=\"mt-4\">\r\n                        <p className=\"text-sm text-green-500\">\r\n                            Image uploaded successfully:\r\n                        </p>\r\n                        <a\r\n                            href={imagePath}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"text-primary\"\r\n                        >\r\n                            {imagePath}\r\n                        </a>\r\n                    </div>\r\n                )}\r\n            </CredenzaContent>\r\n        </Credenza>\r\n    );\r\n}\r\n"],"names":["ImageUploader","onUpload","selected_image","image","setImage","useState","imagePath","setImagePath","errors","setErrors","loading","setLoading","handleImageChange","event","file","_a","handleSubmit","e","formData","response","axios","error","_b","Credenza","jsxs","CredenzaTrigger","jsx","ProfilePic","Button","CredenzaContent","CredenzaHeader","CredenzaTitle","CredenzaDescription","Label","Input","SubmitBtn"],"mappings":"8SAgBA,SAAwBA,EAAc,CAClC,SAAAC,EACA,eAAAC,CACJ,EAGG,CACC,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAsB,IAAI,EAC9C,CAACC,EAAWC,CAAY,EAAIF,EAAAA,SAAwB,IAAI,EACxD,CAACG,EAAQC,CAAS,EAAIJ,WAAS,CACjC,cAAe,CAAA,CAAC,CACnB,EACK,CAACK,EAASC,CAAU,EAAIN,EAAAA,SAAS,EAAK,EAEtCO,EAAqBC,GAA+C,OACtE,MAAMC,GAAOC,EAAAF,EAAM,OAAO,QAAb,YAAAE,EAAqB,GAC9BD,GACAV,EAASU,CAAI,CAErB,EAEME,EAAkD,MAAOC,GAAM,SAEjE,GADAA,EAAE,eAAe,EACb,CAACd,EAAO,CACR,MAAM,kCAAkC,EACxC,MAAA,CAGE,MAAAe,EAAW,IAAI,SACZA,EAAA,OAAO,QAASf,CAAK,EAE1B,GAAA,CACAQ,EAAW,EAAI,EACf,MAAMQ,EAAW,MAAMC,EAAM,KAAK,gBAAiBF,EAAU,CACzD,QAAS,CACL,eAAgB,qBAAA,CACpB,CACH,EAEYX,EAAAY,EAAS,KAAK,IAAI,EACtBlB,EAAAkB,EAAS,KAAK,IAAI,EAC3BR,EAAW,EAAK,QACXU,EAAO,CACZV,EAAW,EAAK,EACZS,EAAM,aAAaC,CAAK,KAAKC,GAAAP,EAAAM,EAAM,WAAN,YAAAN,EAAgB,OAAhB,MAAAO,EAAsB,QACzCb,EAAAY,EAAM,SAAS,KAAK,MAAM,EAE5B,QAAA,MAAM,wCAAyCA,CAAK,CAChE,CAER,EAEA,cACKE,EACG,CAAA,SAAA,CAACC,EAAAA,KAAAC,EAAA,CAAgB,UAAU,0BACvB,SAAA,CAACC,EAAAA,IAAAC,EAAA,CAAW,KAAMzB,CAAgB,CAAA,EACjCwB,EAAA,IAAAE,EAAA,CAAO,QAAQ,UAAU,SAAY,cAAA,CAAA,CAAA,EAC1C,EACAJ,EAAAA,KAACK,EAAgB,CAAA,UAAU,oBACvB,SAAA,CAAAL,OAACM,EACG,CAAA,SAAA,CAAAJ,EAAAA,IAACK,GAAc,SAAY,cAAA,CAAA,EAC3BL,EAAAA,IAACM,GAAoB,SAErB,iCAAA,CAAA,CAAA,EACJ,EACCR,EAAA,KAAA,OAAA,CAAK,UAAU,YAAY,SAAUR,EAClC,SAAA,CAACQ,EAAAA,KAAA,MAAA,CAAI,UAAU,YACX,SAAA,CAAAE,EAAAA,IAACO,GAAM,SAAa,eAAA,CAAA,EACpBP,EAAA,IAACQ,EAAA,CACG,KAAK,OACL,SAAUtB,EACV,OAAO,2CAAA,CAAA,CACX,EACJ,EACAc,EAAA,IAACS,EAAA,CACG,MAAM,eACN,WAAYzB,EACZ,UAAU,QAAA,CAAA,CACd,EACJ,EACCJ,GACGkB,EAAA,KAAC,MAAI,CAAA,UAAU,OACX,SAAA,CAACE,EAAA,IAAA,IAAA,CAAE,UAAU,yBAAyB,SAEtC,+BAAA,EACAA,EAAA,IAAC,IAAA,CACG,KAAMpB,EACN,OAAO,SACP,IAAI,sBACJ,UAAU,eAET,SAAAA,CAAA,CAAA,CACL,CACJ,CAAA,CAAA,CAER,CAAA,CAAA,EACJ,CAER"}